(function($) {


    var month_names = {
        '01' : 'January',
        '02' : 'February',
        '03' : 'March',
        '04' : 'April',
        '05' : 'May',
        '06' : 'June',
        '07' : 'July',
        '08' : 'August',
        '09' : 'September',
        '10' : 'October',
        '11' : 'November',
        '12' : 'December'
    };

    var product = {
        'data' : [
            {
                'year' : '2000',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '04' },
                    { 'mon' : '01', 'day' : '11' },
                    { 'mon' : '01', 'day' : '18' },
                    { 'mon' : '01', 'day' : '25' },
                    { 'mon' : '02', 'day' : '01' },
                    { 'mon' : '02', 'day' : '08' },
                    { 'mon' : '02', 'day' : '15' },
                    { 'mon' : '02', 'day' : '22' },
                    { 'mon' : '02', 'day' : '29' },
                    { 'mon' : '03', 'day' : '07' },
                    { 'mon' : '03', 'day' : '14' },
                    { 'mon' : '03', 'day' : '21' },
                    { 'mon' : '03', 'day' : '28' },
                    { 'mon' : '04', 'day' : '04' },
                    { 'mon' : '04', 'day' : '11' },
                    { 'mon' : '04', 'day' : '18' },
                    { 'mon' : '04', 'day' : '25' },
                    { 'mon' : '05', 'day' : '02' },
                    { 'mon' : '05', 'day' : '09' },
                    { 'mon' : '05', 'day' : '16' },
                    { 'mon' : '05', 'day' : '23' },
                    { 'mon' : '05', 'day' : '30' },
                    { 'mon' : '06', 'day' : '06' },
                    { 'mon' : '06', 'day' : '13' },
                    { 'mon' : '06', 'day' : '20' },
                    { 'mon' : '06', 'day' : '27' },
                    { 'mon' : '07', 'day' : '04' },
                    { 'mon' : '07', 'day' : '11' },
                    { 'mon' : '07', 'day' : '18' },
                    { 'mon' : '07', 'day' : '25' },
                    { 'mon' : '08', 'day' : '01' },
                    { 'mon' : '08', 'day' : '08' },
                    { 'mon' : '08', 'day' : '15' },
                    { 'mon' : '08', 'day' : '22' },
                    { 'mon' : '08', 'day' : '29' },
                    { 'mon' : '09', 'day' : '05' },
                    { 'mon' : '09', 'day' : '12' },
                    { 'mon' : '09', 'day' : '19' },
                    { 'mon' : '09', 'day' : '26' },
                    { 'mon' : '10', 'day' : '03' },
                    { 'mon' : '10', 'day' : '10' },
                    { 'mon' : '10', 'day' : '17' },
                    { 'mon' : '10', 'day' : '24' },
                    { 'mon' : '10', 'day' : '31' },
                    { 'mon' : '11', 'day' : '07' },
                    { 'mon' : '11', 'day' : '14' },
                    { 'mon' : '11', 'day' : '21' },
                    { 'mon' : '11', 'day' : '28' },
                    { 'mon' : '12', 'day' : '05' },
                    { 'mon' : '12', 'day' : '12' },
                    { 'mon' : '12', 'day' : '19' },
                    { 'mon' : '12', 'day' : '26' }
                ]
            },
            
            {
                'year' : '2001',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '02' },
                    { 'mon' : '01', 'day' : '09' },
                    { 'mon' : '01', 'day' : '16' },
                    { 'mon' : '01', 'day' : '23' },
                    { 'mon' : '01', 'day' : '30' },
                    { 'mon' : '02', 'day' : '06' },
                    { 'mon' : '02', 'day' : '13' },
                    { 'mon' : '02', 'day' : '20' },
                    { 'mon' : '02', 'day' : '27' },
                    { 'mon' : '03', 'day' : '06' },
                    { 'mon' : '03', 'day' : '13' },
                    { 'mon' : '03', 'day' : '20' },
                    { 'mon' : '03', 'day' : '27' },
                    { 'mon' : '04', 'day' : '03' },
                    { 'mon' : '04', 'day' : '10' },
                    { 'mon' : '04', 'day' : '17' },
                    { 'mon' : '04', 'day' : '24' },
                    { 'mon' : '05', 'day' : '01' },
                    { 'mon' : '05', 'day' : '08' },
                    { 'mon' : '05', 'day' : '15' },
                    { 'mon' : '05', 'day' : '22' },
                    { 'mon' : '05', 'day' : '29' },
                    { 'mon' : '06', 'day' : '05' },
                    { 'mon' : '06', 'day' : '12' },
                    { 'mon' : '06', 'day' : '19' },
                    { 'mon' : '06', 'day' : '26' },
                    { 'mon' : '07', 'day' : '03' },
                    { 'mon' : '07', 'day' : '10' },
                    { 'mon' : '07', 'day' : '17' },
                    { 'mon' : '07', 'day' : '24' },
                    { 'mon' : '07', 'day' : '31' },
                    { 'mon' : '08', 'day' : '07' },
                    { 'mon' : '08', 'day' : '14' },
                    { 'mon' : '08', 'day' : '21' },
                    { 'mon' : '08', 'day' : '28' },
                    { 'mon' : '09', 'day' : '04' },
                    { 'mon' : '09', 'day' : '11' },
                    { 'mon' : '09', 'day' : '18' },
                    { 'mon' : '09', 'day' : '25' },
                    { 'mon' : '10', 'day' : '02' },
                    { 'mon' : '10', 'day' : '09' },
                    { 'mon' : '10', 'day' : '16' },
                    { 'mon' : '10', 'day' : '23' },
                    { 'mon' : '10', 'day' : '30' },
                    { 'mon' : '11', 'day' : '06' },
                    { 'mon' : '11', 'day' : '13' },
                    { 'mon' : '11', 'day' : '20' },
                    { 'mon' : '11', 'day' : '27' },
                    { 'mon' : '12', 'day' : '04' },
                    { 'mon' : '12', 'day' : '11' },
                    { 'mon' : '12', 'day' : '18' },
                    { 'mon' : '12', 'day' : '25' }
                ]
            },
            
            {
                'year' : '2002',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '01' },
                    { 'mon' : '01', 'day' : '08' },
                    { 'mon' : '01', 'day' : '15' },
                    { 'mon' : '01', 'day' : '22' },
                    { 'mon' : '01', 'day' : '29' },
                    { 'mon' : '02', 'day' : '05' },
                    { 'mon' : '02', 'day' : '12' },
                    { 'mon' : '02', 'day' : '19' },
                    { 'mon' : '02', 'day' : '26' },
                    { 'mon' : '03', 'day' : '05' },
                    { 'mon' : '03', 'day' : '12' },
                    { 'mon' : '03', 'day' : '19' },
                    { 'mon' : '03', 'day' : '26' },
                    { 'mon' : '04', 'day' : '02' },
                    { 'mon' : '04', 'day' : '09' },
                    { 'mon' : '04', 'day' : '16' },
                    { 'mon' : '04', 'day' : '23' },
                    { 'mon' : '04', 'day' : '30' },
                    { 'mon' : '05', 'day' : '07' },
                    { 'mon' : '05', 'day' : '14' },
                    { 'mon' : '05', 'day' : '21' },
                    { 'mon' : '05', 'day' : '28' },
                    { 'mon' : '06', 'day' : '04' },
                    { 'mon' : '06', 'day' : '11' },
                    { 'mon' : '06', 'day' : '18' },
                    { 'mon' : '06', 'day' : '25' },
                    { 'mon' : '07', 'day' : '02' },
                    { 'mon' : '07', 'day' : '09' },
                    { 'mon' : '07', 'day' : '16' },
                    { 'mon' : '07', 'day' : '23' },
                    { 'mon' : '07', 'day' : '30' },
                    { 'mon' : '08', 'day' : '06' },
                    { 'mon' : '08', 'day' : '13' },
                    { 'mon' : '08', 'day' : '20' },
                    { 'mon' : '08', 'day' : '27' },
                    { 'mon' : '09', 'day' : '03' },
                    { 'mon' : '09', 'day' : '10' },
                    { 'mon' : '09', 'day' : '17' },
                    { 'mon' : '09', 'day' : '24' },
                    { 'mon' : '10', 'day' : '01' },
                    { 'mon' : '10', 'day' : '08' },
                    { 'mon' : '10', 'day' : '15' },
                    { 'mon' : '10', 'day' : '22' },
                    { 'mon' : '10', 'day' : '29' },
                    { 'mon' : '11', 'day' : '05' },
                    { 'mon' : '11', 'day' : '12' },
                    { 'mon' : '11', 'day' : '19' },
                    { 'mon' : '11', 'day' : '26' },
                    { 'mon' : '12', 'day' : '03' },
                    { 'mon' : '12', 'day' : '10' },
                    { 'mon' : '12', 'day' : '17' },
                    { 'mon' : '12', 'day' : '24' },
                    { 'mon' : '12', 'day' : '31' }
                ]
            },
            
            {
                'year' : '2003',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '07' },
                    { 'mon' : '01', 'day' : '14' },
                    { 'mon' : '01', 'day' : '21' },
                    { 'mon' : '01', 'day' : '28' },
                    { 'mon' : '02', 'day' : '04' },
                    { 'mon' : '02', 'day' : '11' },
                    { 'mon' : '02', 'day' : '18' },
                    { 'mon' : '02', 'day' : '25' },
                    { 'mon' : '03', 'day' : '04' },
                    { 'mon' : '03', 'day' : '11' },
                    { 'mon' : '03', 'day' : '18' },
                    { 'mon' : '03', 'day' : '25' },
                    { 'mon' : '04', 'day' : '01' },
                    { 'mon' : '04', 'day' : '08' },
                    { 'mon' : '04', 'day' : '15' },
                    { 'mon' : '04', 'day' : '22' },
                    { 'mon' : '04', 'day' : '29' },
                    { 'mon' : '05', 'day' : '06' },
                    { 'mon' : '05', 'day' : '13' },
                    { 'mon' : '05', 'day' : '20' },
                    { 'mon' : '05', 'day' : '27' },
                    { 'mon' : '06', 'day' : '03' },
                    { 'mon' : '06', 'day' : '10' },
                    { 'mon' : '06', 'day' : '17' },
                    { 'mon' : '06', 'day' : '24' },
                    { 'mon' : '07', 'day' : '01' },
                    { 'mon' : '07', 'day' : '08' },
                    { 'mon' : '07', 'day' : '15' },
                    { 'mon' : '07', 'day' : '22' },
                    { 'mon' : '07', 'day' : '29' },
                    { 'mon' : '08', 'day' : '05' },
                    { 'mon' : '08', 'day' : '12' },
                    { 'mon' : '08', 'day' : '19' },
                    { 'mon' : '08', 'day' : '26' },
                    { 'mon' : '09', 'day' : '02' },
                    { 'mon' : '09', 'day' : '09' },
                    { 'mon' : '09', 'day' : '16' },
                    { 'mon' : '09', 'day' : '23' },
                    { 'mon' : '09', 'day' : '30' },
                    { 'mon' : '10', 'day' : '07' },
                    { 'mon' : '10', 'day' : '14' },
                    { 'mon' : '10', 'day' : '21' },
                    { 'mon' : '10', 'day' : '28' },
                    { 'mon' : '11', 'day' : '04' },
                    { 'mon' : '11', 'day' : '11' },
                    { 'mon' : '11', 'day' : '18' },
                    { 'mon' : '11', 'day' : '25' },
                    { 'mon' : '12', 'day' : '02' },
                    { 'mon' : '12', 'day' : '09' },
                    { 'mon' : '12', 'day' : '16' },
                    { 'mon' : '12', 'day' : '23' },
                    { 'mon' : '12', 'day' : '30' }
                ]
            },
            
            {
                'year' : '2004',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '06' },
                    { 'mon' : '01', 'day' : '13' },
                    { 'mon' : '01', 'day' : '20' },
                    { 'mon' : '01', 'day' : '27' },
                    { 'mon' : '02', 'day' : '03' },
                    { 'mon' : '02', 'day' : '10' },
                    { 'mon' : '02', 'day' : '17' },
                    { 'mon' : '02', 'day' : '24' },
                    { 'mon' : '03', 'day' : '02' },
                    { 'mon' : '03', 'day' : '09' },
                    { 'mon' : '03', 'day' : '16' },
                    { 'mon' : '03', 'day' : '23' },
                    { 'mon' : '03', 'day' : '30' },
                    { 'mon' : '04', 'day' : '06' },
                    { 'mon' : '04', 'day' : '13' },
                    { 'mon' : '04', 'day' : '20' },
                    { 'mon' : '04', 'day' : '27' },
                    { 'mon' : '05', 'day' : '04' },
                    { 'mon' : '05', 'day' : '11' },
                    { 'mon' : '05', 'day' : '18' },
                    { 'mon' : '05', 'day' : '25' },
                    { 'mon' : '06', 'day' : '01' },
                    { 'mon' : '06', 'day' : '08' },
                    { 'mon' : '06', 'day' : '15' },
                    { 'mon' : '06', 'day' : '22' },
                    { 'mon' : '06', 'day' : '29' },
                    { 'mon' : '07', 'day' : '06' },
                    { 'mon' : '07', 'day' : '13' },
                    { 'mon' : '07', 'day' : '20' },
                    { 'mon' : '07', 'day' : '27' },
                    { 'mon' : '08', 'day' : '03' },
                    { 'mon' : '08', 'day' : '10' },
                    { 'mon' : '08', 'day' : '17' },
                    { 'mon' : '08', 'day' : '24' },
                    { 'mon' : '08', 'day' : '31' },
                    { 'mon' : '09', 'day' : '07' },
                    { 'mon' : '09', 'day' : '14' },
                    { 'mon' : '09', 'day' : '21' },
                    { 'mon' : '09', 'day' : '28' },
                    { 'mon' : '10', 'day' : '05' },
                    { 'mon' : '10', 'day' : '12' },
                    { 'mon' : '10', 'day' : '19' },
                    { 'mon' : '10', 'day' : '26' },
                    { 'mon' : '11', 'day' : '02' },
                    { 'mon' : '11', 'day' : '09' },
                    { 'mon' : '11', 'day' : '16' },
                    { 'mon' : '11', 'day' : '23' },
                    { 'mon' : '11', 'day' : '30' },
                    { 'mon' : '12', 'day' : '07' },
                    { 'mon' : '12', 'day' : '14' },
                    { 'mon' : '12', 'day' : '21' },
                    { 'mon' : '12', 'day' : '28' }
                ]
            },
            
            {
                'year' : '2005',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '04' },
                    { 'mon' : '01', 'day' : '11' },
                    { 'mon' : '01', 'day' : '18' },
                    { 'mon' : '01', 'day' : '25' },
                    { 'mon' : '02', 'day' : '01' },
                    { 'mon' : '02', 'day' : '08' },
                    { 'mon' : '02', 'day' : '15' },
                    { 'mon' : '02', 'day' : '22' },
                    { 'mon' : '03', 'day' : '01' },
                    { 'mon' : '03', 'day' : '08' },
                    { 'mon' : '03', 'day' : '15' },
                    { 'mon' : '03', 'day' : '22' },
                    { 'mon' : '03', 'day' : '29' },
                    { 'mon' : '04', 'day' : '05' },
                    { 'mon' : '04', 'day' : '12' },
                    { 'mon' : '04', 'day' : '19' },
                    { 'mon' : '04', 'day' : '26' },
                    { 'mon' : '05', 'day' : '03' },
                    { 'mon' : '05', 'day' : '10' },
                    { 'mon' : '05', 'day' : '17' },
                    { 'mon' : '05', 'day' : '24' },
                    { 'mon' : '05', 'day' : '31' },
                    { 'mon' : '06', 'day' : '07' },
                    { 'mon' : '06', 'day' : '14' },
                    { 'mon' : '06', 'day' : '21' },
                    { 'mon' : '06', 'day' : '28' },
                    { 'mon' : '07', 'day' : '05' },
                    { 'mon' : '07', 'day' : '12' },
                    { 'mon' : '07', 'day' : '19' },
                    { 'mon' : '07', 'day' : '26' },
                    { 'mon' : '08', 'day' : '02' },
                    { 'mon' : '08', 'day' : '09' },
                    { 'mon' : '08', 'day' : '16' },
                    { 'mon' : '08', 'day' : '23' },
                    { 'mon' : '08', 'day' : '30' },
                    { 'mon' : '09', 'day' : '06' },
                    { 'mon' : '09', 'day' : '13' },
                    { 'mon' : '09', 'day' : '20' },
                    { 'mon' : '09', 'day' : '27' },
                    { 'mon' : '10', 'day' : '04' },
                    { 'mon' : '10', 'day' : '11' },
                    { 'mon' : '10', 'day' : '18' },
                    { 'mon' : '10', 'day' : '25' },
                    { 'mon' : '11', 'day' : '01' },
                    { 'mon' : '11', 'day' : '08' },
                    { 'mon' : '11', 'day' : '15' },
                    { 'mon' : '11', 'day' : '22' },
                    { 'mon' : '11', 'day' : '29' },
                    { 'mon' : '12', 'day' : '06' },
                    { 'mon' : '12', 'day' : '13' },
                    { 'mon' : '12', 'day' : '20' },
                    { 'mon' : '12', 'day' : '27' }
                ]
            },
            
            {
                'year' : '2006',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '03' },
                    { 'mon' : '01', 'day' : '10' },
                    { 'mon' : '01', 'day' : '17' },
                    { 'mon' : '01', 'day' : '24' },
                    { 'mon' : '01', 'day' : '31' },
                    { 'mon' : '02', 'day' : '07' },
                    { 'mon' : '02', 'day' : '14' },
                    { 'mon' : '02', 'day' : '21' },
                    { 'mon' : '02', 'day' : '28' },
                    { 'mon' : '03', 'day' : '07' },
                    { 'mon' : '03', 'day' : '14' },
                    { 'mon' : '03', 'day' : '21' },
                    { 'mon' : '03', 'day' : '28' },
                    { 'mon' : '04', 'day' : '04' },
                    { 'mon' : '04', 'day' : '11' },
                    { 'mon' : '04', 'day' : '18' },
                    { 'mon' : '04', 'day' : '25' },
                    { 'mon' : '05', 'day' : '02' },
                    { 'mon' : '05', 'day' : '09' },
                    { 'mon' : '05', 'day' : '16' },
                    { 'mon' : '05', 'day' : '23' },
                    { 'mon' : '05', 'day' : '30' },
                    { 'mon' : '06', 'day' : '06' },
                    { 'mon' : '06', 'day' : '13' },
                    { 'mon' : '06', 'day' : '20' },
                    { 'mon' : '06', 'day' : '27' },
                    { 'mon' : '07', 'day' : '04' },
                    { 'mon' : '07', 'day' : '11' },
                    { 'mon' : '07', 'day' : '18' },
                    { 'mon' : '07', 'day' : '25' },
                    { 'mon' : '08', 'day' : '01' },
                    { 'mon' : '08', 'day' : '08' },
                    { 'mon' : '08', 'day' : '15' },
                    { 'mon' : '08', 'day' : '22' },
                    { 'mon' : '08', 'day' : '29' },
                    { 'mon' : '09', 'day' : '05' },
                    { 'mon' : '09', 'day' : '12' },
                    { 'mon' : '09', 'day' : '19' },
                    { 'mon' : '09', 'day' : '26' },
                    { 'mon' : '10', 'day' : '03' },
                    { 'mon' : '10', 'day' : '10' },
                    { 'mon' : '10', 'day' : '17' },
                    { 'mon' : '10', 'day' : '24' },
                    { 'mon' : '10', 'day' : '31' },
                    { 'mon' : '11', 'day' : '07' },
                    { 'mon' : '11', 'day' : '14' },
                    { 'mon' : '11', 'day' : '21' },
                    { 'mon' : '11', 'day' : '28' },
                    { 'mon' : '12', 'day' : '05' },
                    { 'mon' : '12', 'day' : '12' },
                    { 'mon' : '12', 'day' : '19' },
                    { 'mon' : '12', 'day' : '26' }
                ]
            },
            
            {
                'year' : '2007',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '02' },
                    { 'mon' : '01', 'day' : '09' },
                    { 'mon' : '01', 'day' : '16' },
                    { 'mon' : '01', 'day' : '23' },
                    { 'mon' : '01', 'day' : '30' },
                    { 'mon' : '02', 'day' : '06' },
                    { 'mon' : '02', 'day' : '13' },
                    { 'mon' : '02', 'day' : '20' },
                    { 'mon' : '02', 'day' : '27' },
                    { 'mon' : '03', 'day' : '06' },
                    { 'mon' : '03', 'day' : '13' },
                    { 'mon' : '03', 'day' : '20' },
                    { 'mon' : '03', 'day' : '27' },
                    { 'mon' : '04', 'day' : '03' },
                    { 'mon' : '04', 'day' : '10' },
                    { 'mon' : '04', 'day' : '17' },
                    { 'mon' : '04', 'day' : '24' },
                    { 'mon' : '05', 'day' : '01' },
                    { 'mon' : '05', 'day' : '08' },
                    { 'mon' : '05', 'day' : '15' },
                    { 'mon' : '05', 'day' : '22' },
                    { 'mon' : '05', 'day' : '29' },
                    { 'mon' : '06', 'day' : '05' },
                    { 'mon' : '06', 'day' : '12' },
                    { 'mon' : '06', 'day' : '19' },
                    { 'mon' : '06', 'day' : '26' },
                    { 'mon' : '07', 'day' : '03' },
                    { 'mon' : '07', 'day' : '10' },
                    { 'mon' : '07', 'day' : '17' },
                    { 'mon' : '07', 'day' : '24' },
                    { 'mon' : '07', 'day' : '31' },
                    { 'mon' : '08', 'day' : '07' },
                    { 'mon' : '08', 'day' : '14' },
                    { 'mon' : '08', 'day' : '21' },
                    { 'mon' : '08', 'day' : '28' },
                    { 'mon' : '09', 'day' : '04' },
                    { 'mon' : '09', 'day' : '11' },
                    { 'mon' : '09', 'day' : '18' },
                    { 'mon' : '09', 'day' : '25' },
                    { 'mon' : '10', 'day' : '02' },
                    { 'mon' : '10', 'day' : '09' },
                    { 'mon' : '10', 'day' : '16' },
                    { 'mon' : '10', 'day' : '23' },
                    { 'mon' : '10', 'day' : '30' },
                    { 'mon' : '11', 'day' : '06' },
                    { 'mon' : '11', 'day' : '13' },
                    { 'mon' : '11', 'day' : '20' },
                    { 'mon' : '11', 'day' : '27' },
                    { 'mon' : '12', 'day' : '04' },
                    { 'mon' : '12', 'day' : '11' },
                    { 'mon' : '12', 'day' : '18' },
                    { 'mon' : '12', 'day' : '25' }
                ]
            },
            
            {
                'year' : '2008',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '01' },
                    { 'mon' : '01', 'day' : '08' },
                    { 'mon' : '01', 'day' : '15' },
                    { 'mon' : '01', 'day' : '22' },
                    { 'mon' : '01', 'day' : '29' },
                    { 'mon' : '02', 'day' : '05' },
                    { 'mon' : '02', 'day' : '12' },
                    { 'mon' : '02', 'day' : '19' },
                    { 'mon' : '02', 'day' : '26' },
                    { 'mon' : '03', 'day' : '04' },
                    { 'mon' : '03', 'day' : '11' },
                    { 'mon' : '03', 'day' : '18' },
                    { 'mon' : '03', 'day' : '25' },
                    { 'mon' : '04', 'day' : '01' },
                    { 'mon' : '04', 'day' : '08' },
                    { 'mon' : '04', 'day' : '15' },
                    { 'mon' : '04', 'day' : '22' },
                    { 'mon' : '04', 'day' : '29' },
                    { 'mon' : '05', 'day' : '06' },
                    { 'mon' : '05', 'day' : '13' },
                    { 'mon' : '05', 'day' : '20' },
                    { 'mon' : '05', 'day' : '27' },
                    { 'mon' : '06', 'day' : '03' },
                    { 'mon' : '06', 'day' : '10' },
                    { 'mon' : '06', 'day' : '17' },
                    { 'mon' : '06', 'day' : '24' },
                    { 'mon' : '07', 'day' : '01' },
                    { 'mon' : '07', 'day' : '08' },
                    { 'mon' : '07', 'day' : '15' },
                    { 'mon' : '07', 'day' : '22' },
                    { 'mon' : '07', 'day' : '29' },
                    { 'mon' : '08', 'day' : '05' },
                    { 'mon' : '08', 'day' : '12' },
                    { 'mon' : '08', 'day' : '19' },
                    { 'mon' : '08', 'day' : '26' },
                    { 'mon' : '09', 'day' : '02' },
                    { 'mon' : '09', 'day' : '09' },
                    { 'mon' : '09', 'day' : '16' },
                    { 'mon' : '09', 'day' : '23' },
                    { 'mon' : '09', 'day' : '30' },
                    { 'mon' : '10', 'day' : '07' },
                    { 'mon' : '10', 'day' : '14' },
                    { 'mon' : '10', 'day' : '21' },
                    { 'mon' : '10', 'day' : '28' },
                    { 'mon' : '11', 'day' : '04' },
                    { 'mon' : '11', 'day' : '11' },
                    { 'mon' : '11', 'day' : '18' },
                    { 'mon' : '11', 'day' : '25' },
                    { 'mon' : '12', 'day' : '02' },
                    { 'mon' : '12', 'day' : '09' },
                    { 'mon' : '12', 'day' : '16' },
                    { 'mon' : '12', 'day' : '23' },
                    { 'mon' : '12', 'day' : '30' }
                ]
            },
            
            {
                'year' : '2009',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '06' },
                    { 'mon' : '01', 'day' : '13' },
                    { 'mon' : '01', 'day' : '20' },
                    { 'mon' : '01', 'day' : '27' },
                    { 'mon' : '02', 'day' : '03' },
                    { 'mon' : '02', 'day' : '10' },
                    { 'mon' : '02', 'day' : '17' },
                    { 'mon' : '02', 'day' : '24' },
                    { 'mon' : '03', 'day' : '03' },
                    { 'mon' : '03', 'day' : '10' },
                    { 'mon' : '03', 'day' : '17' },
                    { 'mon' : '03', 'day' : '24' },
                    { 'mon' : '03', 'day' : '31' },
                    { 'mon' : '04', 'day' : '07' },
                    { 'mon' : '04', 'day' : '14' },
                    { 'mon' : '04', 'day' : '21' },
                    { 'mon' : '04', 'day' : '28' },
                    { 'mon' : '05', 'day' : '05' },
                    { 'mon' : '05', 'day' : '12' },
                    { 'mon' : '05', 'day' : '19' },
                    { 'mon' : '05', 'day' : '26' },
                    { 'mon' : '06', 'day' : '02' },
                    { 'mon' : '06', 'day' : '09' },
                    { 'mon' : '06', 'day' : '16' },
                    { 'mon' : '06', 'day' : '23' },
                    { 'mon' : '06', 'day' : '30' },
                    { 'mon' : '07', 'day' : '07' },
                    { 'mon' : '07', 'day' : '14' },
                    { 'mon' : '07', 'day' : '21' },
                    { 'mon' : '07', 'day' : '28' },
                    { 'mon' : '08', 'day' : '04' },
                    { 'mon' : '08', 'day' : '11' },
                    { 'mon' : '08', 'day' : '18' },
                    { 'mon' : '08', 'day' : '25' },
                    { 'mon' : '09', 'day' : '01' },
                    { 'mon' : '09', 'day' : '08' },
                    { 'mon' : '09', 'day' : '15' },
                    { 'mon' : '09', 'day' : '22' },
                    { 'mon' : '09', 'day' : '29' },
                    { 'mon' : '10', 'day' : '06' },
                    { 'mon' : '10', 'day' : '13' },
                    { 'mon' : '10', 'day' : '20' },
                    { 'mon' : '10', 'day' : '27' },
                    { 'mon' : '11', 'day' : '03' },
                    { 'mon' : '11', 'day' : '10' },
                    { 'mon' : '11', 'day' : '17' },
                    { 'mon' : '11', 'day' : '24' },
                    { 'mon' : '12', 'day' : '01' },
                    { 'mon' : '12', 'day' : '08' },
                    { 'mon' : '12', 'day' : '15' },
                    { 'mon' : '12', 'day' : '22' },
                    { 'mon' : '12', 'day' : '29' }
                ]
            },
            
            {
                'year' : '2010',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '05' },
                    { 'mon' : '01', 'day' : '12' },
                    { 'mon' : '01', 'day' : '19' },
                    { 'mon' : '01', 'day' : '26' },
                    { 'mon' : '02', 'day' : '02' },
                    { 'mon' : '02', 'day' : '09' },
                    { 'mon' : '02', 'day' : '16' },
                    { 'mon' : '02', 'day' : '23' },
                    { 'mon' : '03', 'day' : '02' },
                    { 'mon' : '03', 'day' : '09' },
                    { 'mon' : '03', 'day' : '16' },
                    { 'mon' : '03', 'day' : '23' },
                    { 'mon' : '03', 'day' : '30' },
                    { 'mon' : '04', 'day' : '06' },
                    { 'mon' : '04', 'day' : '13' },
                    { 'mon' : '04', 'day' : '20' },
                    { 'mon' : '04', 'day' : '27' },
                    { 'mon' : '05', 'day' : '04' },
                    { 'mon' : '05', 'day' : '11' },
                    { 'mon' : '05', 'day' : '18' },
                    { 'mon' : '05', 'day' : '25' },
                    { 'mon' : '06', 'day' : '01' },
                    { 'mon' : '06', 'day' : '08' },
                    { 'mon' : '06', 'day' : '15' },
                    { 'mon' : '06', 'day' : '22' },
                    { 'mon' : '06', 'day' : '29' },
                    { 'mon' : '07', 'day' : '06' },
                    { 'mon' : '07', 'day' : '13' },
                    { 'mon' : '07', 'day' : '20' },
                    { 'mon' : '07', 'day' : '27' },
                    { 'mon' : '08', 'day' : '03' },
                    { 'mon' : '08', 'day' : '10' },
                    { 'mon' : '08', 'day' : '17' },
                    { 'mon' : '08', 'day' : '24' },
                    { 'mon' : '08', 'day' : '31' },
                    { 'mon' : '09', 'day' : '07' },
                    { 'mon' : '09', 'day' : '14' },
                    { 'mon' : '09', 'day' : '21' },
                    { 'mon' : '09', 'day' : '28' },
                    { 'mon' : '10', 'day' : '05' },
                    { 'mon' : '10', 'day' : '12' },
                    { 'mon' : '10', 'day' : '19' },
                    { 'mon' : '10', 'day' : '26' },
                    { 'mon' : '11', 'day' : '02' },
                    { 'mon' : '11', 'day' : '09' },
                    { 'mon' : '11', 'day' : '16' },
                    { 'mon' : '11', 'day' : '23' },
                    { 'mon' : '11', 'day' : '30' },
                    { 'mon' : '12', 'day' : '07' },
                    { 'mon' : '12', 'day' : '14' },
                    { 'mon' : '12', 'day' : '21' },
                    { 'mon' : '12', 'day' : '28' }
                ]
            },
            
            {
                'year' : '2011',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '04' },
                    { 'mon' : '01', 'day' : '11' },
                    { 'mon' : '01', 'day' : '18' },
                    { 'mon' : '01', 'day' : '25' },
                    { 'mon' : '02', 'day' : '01' },
                    { 'mon' : '02', 'day' : '08' },
                    { 'mon' : '02', 'day' : '15' },
                    { 'mon' : '02', 'day' : '22' },
                    { 'mon' : '03', 'day' : '01' },
                    { 'mon' : '03', 'day' : '08' },
                    { 'mon' : '03', 'day' : '15' },
                    { 'mon' : '03', 'day' : '22' },
                    { 'mon' : '03', 'day' : '29' },
                    { 'mon' : '04', 'day' : '05' },
                    { 'mon' : '04', 'day' : '12' },
                    { 'mon' : '04', 'day' : '19' },
                    { 'mon' : '04', 'day' : '26' },
                    { 'mon' : '05', 'day' : '03' },
                    { 'mon' : '05', 'day' : '10' },
                    { 'mon' : '05', 'day' : '17' },
                    { 'mon' : '05', 'day' : '24' },
                    { 'mon' : '05', 'day' : '31' },
                    { 'mon' : '06', 'day' : '07' },
                    { 'mon' : '06', 'day' : '14' },
                    { 'mon' : '06', 'day' : '21' },
                    { 'mon' : '06', 'day' : '28' },
                    { 'mon' : '07', 'day' : '05' },
                    { 'mon' : '07', 'day' : '12' },
                    { 'mon' : '07', 'day' : '19' },
                    { 'mon' : '07', 'day' : '26' },
                    { 'mon' : '08', 'day' : '02' },
                    { 'mon' : '08', 'day' : '09' },
                    { 'mon' : '08', 'day' : '16' },
                    { 'mon' : '08', 'day' : '23' },
                    { 'mon' : '08', 'day' : '30' },
                    { 'mon' : '09', 'day' : '06' },
                    { 'mon' : '09', 'day' : '13' },
                    { 'mon' : '09', 'day' : '20' },
                    { 'mon' : '09', 'day' : '27' },
                    { 'mon' : '10', 'day' : '04' },
                    { 'mon' : '10', 'day' : '11' },
                    { 'mon' : '10', 'day' : '18' },
                    { 'mon' : '10', 'day' : '25' },
                    { 'mon' : '11', 'day' : '01' },
                    { 'mon' : '11', 'day' : '08' },
                    { 'mon' : '11', 'day' : '15' },
                    { 'mon' : '11', 'day' : '22' },
                    { 'mon' : '11', 'day' : '29' },
                    { 'mon' : '12', 'day' : '06' },
                    { 'mon' : '12', 'day' : '13' },
                    { 'mon' : '12', 'day' : '20' },
                    { 'mon' : '12', 'day' : '27' }
                ]
            },
            
            {
                'year' : '2012',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '03' },
                    { 'mon' : '01', 'day' : '10' },
                    { 'mon' : '01', 'day' : '17' },
                    { 'mon' : '01', 'day' : '24' },
                    { 'mon' : '01', 'day' : '31' },
                    { 'mon' : '02', 'day' : '07' },
                    { 'mon' : '02', 'day' : '14' },
                    { 'mon' : '02', 'day' : '21' },
                    { 'mon' : '02', 'day' : '28' },
                    { 'mon' : '03', 'day' : '06' },
                    { 'mon' : '03', 'day' : '13' },
                    { 'mon' : '03', 'day' : '20' },
                    { 'mon' : '03', 'day' : '27' },
                    { 'mon' : '04', 'day' : '03' },
                    { 'mon' : '04', 'day' : '10' },
                    { 'mon' : '04', 'day' : '17' },
                    { 'mon' : '04', 'day' : '24' },
                    { 'mon' : '05', 'day' : '01' },
                    { 'mon' : '05', 'day' : '08' },
                    { 'mon' : '05', 'day' : '15' },
                    { 'mon' : '05', 'day' : '22' },
                    { 'mon' : '05', 'day' : '29' },
                    { 'mon' : '06', 'day' : '05' },
                    { 'mon' : '06', 'day' : '12' },
                    { 'mon' : '06', 'day' : '19' },
                    { 'mon' : '06', 'day' : '26' },
                    { 'mon' : '07', 'day' : '03' },
                    { 'mon' : '07', 'day' : '10' },
                    { 'mon' : '07', 'day' : '17' },
                    { 'mon' : '07', 'day' : '24' },
                    { 'mon' : '07', 'day' : '31' },
                    { 'mon' : '08', 'day' : '07' },
                    { 'mon' : '08', 'day' : '14' },
                    { 'mon' : '08', 'day' : '21' },
                    { 'mon' : '08', 'day' : '28' },
                    { 'mon' : '09', 'day' : '04' },
                    { 'mon' : '09', 'day' : '11' },
                    { 'mon' : '09', 'day' : '18' },
                    { 'mon' : '09', 'day' : '25' },
                    { 'mon' : '10', 'day' : '02' },
                    { 'mon' : '10', 'day' : '09' },
                    { 'mon' : '10', 'day' : '16' },
                    { 'mon' : '10', 'day' : '23' },
                    { 'mon' : '10', 'day' : '30' },
                    { 'mon' : '11', 'day' : '06' },
                    { 'mon' : '11', 'day' : '13' },
                    { 'mon' : '11', 'day' : '20' },
                    { 'mon' : '11', 'day' : '27' },
                    { 'mon' : '12', 'day' : '04' },
                    { 'mon' : '12', 'day' : '11' },
                    { 'mon' : '12', 'day' : '18' },
                    { 'mon' : '12', 'day' : '25' }
                ]
            },
            
            {
                'year' : '2013',
                'snapshots' : [
                    { 'mon' : '01', 'day' : '01' },
                    { 'mon' : '01', 'day' : '08' },
                    { 'mon' : '01', 'day' : '15' },
                    { 'mon' : '01', 'day' : '22' },
                    { 'mon' : '01', 'day' : '29' },
                    { 'mon' : '02', 'day' : '05' },
                    { 'mon' : '02', 'day' : '12' },
                    { 'mon' : '02', 'day' : '19' },
                    { 'mon' : '02', 'day' : '26' },
                    { 'mon' : '03', 'day' : '05' },
                    { 'mon' : '03', 'day' : '12' },
                    { 'mon' : '03', 'day' : '19' },
                    { 'mon' : '03', 'day' : '26' },
                    { 'mon' : '04', 'day' : '02' },
                    { 'mon' : '04', 'day' : '09' },
                    { 'mon' : '04', 'day' : '16' },
                    { 'mon' : '04', 'day' : '23' },
                    { 'mon' : '04', 'day' : '30' },
                    { 'mon' : '05', 'day' : '07' },
                    { 'mon' : '05', 'day' : '14' },
                    { 'mon' : '05', 'day' : '21' },
                    { 'mon' : '05', 'day' : '28' },
                    { 'mon' : '06', 'day' : '04' },
                    { 'mon' : '06', 'day' : '11' },
                    { 'mon' : '06', 'day' : '18' }
                ]
            }
        ]
    };

    // console.log('len = ' + product['data'][0]['snapshots'].length);

    function year_to_year_index(year) {
        var i;
        for (i=0; i<product["data"].length; ++i) {
            if (product["data"][i]["year"] === year) {
                return i;
            }
        }
        return undefined;
    }

    var current_snapshot_index = 0;
    var prefix = 'drought-usdm';

    function set_breadcrumb(product_name, year, month, day) {
        $('#breadcrumb_tail').text(product_name + ': ' + month_names[month] + ' ' + day + ', ' + year);
    }

    function set_image(prefix, year, month, day) {
        $('#snapshot_image_620').attr('src', image_620_path(prefix, year, month, day));
    }

    function image_620_path(prefix, year, month, day) {
        return "./images/" + prefix + "/" + prefix + '--' + year + '-' + month + '-' + day + '--620.png';;
    }

    function set_all(year, mon, day) {
        set_breadcrumb('Drought', year, mon, day);
        set_image(prefix, year, mon, day);
    }

    function preload_images(prefix, year_index) {
        var year = product["data"][year_index]["year"];
        var snapshots = product["data"][year_index]["snapshots"];
        var i;
        for (i=0; i<snapshots.length; ++i) {
            var snapshot = snapshots[i];
            if (!snapshot["preload"]) {
                snapshot["preload"] = new Image();
                snapshot["preload"].src = image_620_path(prefix, year, snapshot.mon, snapshot.day);
            }
        }
        console.log('preloaded images for ' + year);
    }

    function set_year(year, snapshot_index, preload) {
        var current_year = year;
        var year_index = year_to_year_index(current_year);
        var snapshots = product['data'][year_index]['snapshots'];
        if (preload) { preload_images(prefix, year_index); }
        current_snapshot_index = snapshot_index;
        $('#timeslider').slider({
            'min' : 0,
            'max' : snapshots.length-1,
            'value' : snapshot_index,
            'change' : function(event, ui) {
                current_snapshot_index = $(this).slider('value');
                var snapshot = snapshots[current_snapshot_index];
                set_all(current_year, snapshot.mon, snapshot.day);
            },
            'slide' : function(event, ui) {
                current_snapshot_index = $(this).slider('value');
                var snapshot = snapshots[current_snapshot_index];
                set_all(current_year, snapshot.mon, snapshot.day);
            }
        });
        var snapshot = snapshots[current_snapshot_index];
        set_all(current_year, snapshot.mon, snapshot.day);
    }

    $('document').ready(function() {
        $('#yearslider').slider({
            'min' : 0,
            'max' : 2013-2000,
            'change' : function(event, ui) {
                var year_index = $(this).slider('value');
                yyyy = product["data"][year_index]["year"];
                set_year(yyyy, current_snapshot_index, true);
            },
            'slide' : function(event, ui) {
                var year_index = $(this).slider('value');
                yyyy = product["data"][year_index]["year"];
                set_year(yyyy, current_snapshot_index, false);
            }
        });

        set_year('2000', 0, true);


    });
    
}(jQuery191));
